# Data_Preprocessing

## 1. RDKit Descriptors 으로 피처 추출

### 1) 요약
Smiles 문자열을 기반으로 RDKit Descriptors를 생성하고, 유의미한 Descriptors만 추출하여 새로운 rdkit_train.csv 및 rdkit_test.csv 파일 생성.

### 2) 주요 작업
- 파일 로드 : `train.csv`, `test.csv`
- Feature 생성 : 각 Smiles 문자열에 대해 RDKit Descriptors 값을 계산.
- 전처리
    - `Smiles` 문자열을 화학 분자로 변환할 수 없는 경우, `NaN` 처리
    - 생성된 Descriptors 값의 평균을 계산하고, 평균 값이 0이 아닌 열들만 선택.
- 파일 저장 :
    - `train` 데이터의 `Smiles` 및 `pIC50` 열과 필터링된 Descriptors 특징 값을 결합하여 **`rdkit_train.csv`** 파일로 저장.
    - `test` 데이터의 `Smiles` 열과 필터링된 Descriptors 특징 값을 결합하여 **`rdkit_test.csv`** 파일로 저장.

### 3) 최종 아웃풋
- RDKit Descriptors를 이용해 생성된 train과 test 데이터로, Smiles 및 pIC50을 포함.
- `rdkit_train.csv`, `rdkit_test.csv`


<br>

## 2. 상관계수 기반 피처 필터링(0.3, 0.4, 0.45)

### 1) 요약
rdkit_train.csv와 rdkit_test.csv에서 상관계수 기준으로 의미 있는 특성들을 선별하고, 이를 바탕으로 데이터를 정제하여 새로운 CSV 파일 생성.

### 2) 주요 작업
- 파일 로드 : `rdkit_train.csv`, `rdkit_test.csv`
- 데이터 전처리:
	- Smiles 열을 제외하고 pIC50와 Descriptors로 구성된 데이터프레임 생성.
	- 0 값 비율이 2/3 이상인 열들을 삭제하여 이상치 제거.
- 데이터 분석 및 이상치 탐색:
	- 상관계수 분석을 통해 pIC50와 상관계수 절대값 0.3 이상인 특성을 추출하여 pic50_corr_df 데이터프레임 생성.
	- 각 특성의 히스토그램 및 박스 플롯을 통해 분포와 이상치를 탐색.
- 이상치 제거: MolWt 열을 이용해 분자량이 268.28 ~ 602.65 범위 내에 있는 데이터로 필터링.
- 파일 저장:
	- 상관계수 기준 0.3, 0.4, 0.45 이상인 특성들만 포함하는 train 및 test 데이터를 각각 CSV로 저장:
	- rdkit_train_corr_0.3.csv, rdkit_test_corr_0.3.csv
	- rdkit_train_corr_0.4.csv, rdkit_test_corr_0.4.csv
	- rdkit_train_corr_0.45.csv, rdkit_test_corr_0.45.csv

### 3) 최종 아웃풋
- 상관계수 0.3 이상인 특성들만 포함된 train과 test 데이터 : `rdkit_train_corr_0.3.csv`, `rdkit_test_corr_0.3.csv` 
- 상관계수 0.4 이상인 특성들만 포함된 train과 test 데이터 : `rdkit_train_corr_0.4.csv`, `rdkit_test_corr_0.4.csv`
- 상관계수 0.45 이상인 특성들만 포함된 train과 test 데이터 : `rdkit_train_corr_0.45.csv`, `rdkit_test_corr_0.45.csv`


<br>

## 3. 상관계수 기반 피처 필터링(0.4) + 범주형 피처 제거

### 1) 요약
특정 범위의 분자량 및 특정 열을 제거한 후, 상관계수가 높은 특성들만 선택하여 최종 데이터셋을 생성.

### 2) 주요 작업
- 파일 로드: `rdkit_train.csv`와 `rdkit_test.csv`를 불러옴.
- 데이터 전처리:
	- 0 값 비율이 2/3 이상인 열 제거.
	- MolWt 열을 이용해 특정 분자량(268.28 ~ 602.65) 범위의 데이터로 필터링.
	- 이름이 fr_, Num, Count로 시작/끝나는 열들을 제거.
- 상관계수 계산:
	- pIC50와 상관계수 절대값이 0.4 이상인 특성들을 추출하여 pic50_correlation_4 데이터프레임 생성.
- 파일 저장:
	- pic50_correlation_4에서 추출된 열들을 포함한 train 및 test 데이터를 각각 CSV로 저장:
	- rdkit_train_non_category_corr_0.4.csv
	- rdkit_test_non_categorycorr_0.4.csv

### 3) 최종 아웃풋
- fr_, Num, Count 열을 제거한 후 상관계수 0.4 이상인 특성들만 포함된 train과 test 데이터
- `rdkit_train_non_category_corr_0.4.csv`
- `rdkit_test_non_categorycorr_0.4.csv`

<br>

## 4. 상관계수 기반 피처 필터링(Top7)

### 1) 요약
이전 단계에서 선별된 특정 열들만 사용하여 새로운 데이터프레임을 생성하고, 이를 CSV 파일로 저장


### 2) 주요 작업
- 파일 로드: `rdkit_train_corr_0.3.csv`와 `rdkit_test_corr_0.3.csv`를 불러옴.
- 특정 열 선택:
    - train_df에서 pIC50와 상관성이 높은 특정 열들(Chi2n, NumAromaticHeterocycles, NumAromaticHeterocycles, SlogP_VSA5, BCUT2D_LOGPLOW, SMR_VSA3, Chi0, Kappa1)을 선택하여 train_df_sel 생성.
	- test_df에서도 동일한 열을 선택하되, pIC50은 제외하고 나머지 열들만 선택하여 test_df_sel 생성.
- 파일 저장:
	- train_df_sel을 `rdkit_train_select_columns.csv`로 저장.
	- test_df_sel을 `rdkit_test_select_columns.csv`로 저장.

### 3) 최종 아웃풋
- 특정 열(Chi2n, NumAromaticHeterocycles, 등)만 선택된 train과 test 데이터.
- `rdkit_train_select_columns.csv`
- `rdkit_test_select_columns.csv`

